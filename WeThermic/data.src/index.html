<!DOCTYPE html>
<!--
/****************************************************************************/
/*                                                                          */
/* Copyright (C) 2023-2024 Gauthier Brière (gauthier.briere "at" gmail.com) */
/*                                                                          */
/* This file: index.html is part of WeThermic                               */
/*                                                                          */
/* WeThermic is free software: you can redistribute it and/or modify it     */
/* under the terms of the GNU General Public License as published by        */
/* the Free Software Foundation, either version 3 of the License, or        */
/* (at your option) any later version.                                      */
/*                                                                          */
/* WeThermic is distributed in the hope that it will be useful, but         */
/* WITHOUT ANY WARRANTY; without even the implied warranty of               */
/* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the            */
/* GNU General Public License for more details.                             */
/*                                                                          */
/* You should have received a copy of the GNU General Public License        */
/* along with this program.  If not, see <http://www.gnu.org/licenses/>.    */
/*                                                                          */
/****************************************************************************/
-->

<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <!--<meta name="viewport" content="width=device-width, interactive-widget=resizes-content">-->
    <!--<meta name="viewport" content="width=device-width, initial-scale=0.50, maximum-scale=3.0, minimum-scale=0.50">-->
    <!--<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">-->
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Anémomètre Thermomètre Barmoètre">
    <title>!WeThermic</title>
    <link rel="shortcut icon" type="image/png" href="images/favicon.svg" />
    <link id="cssMain" rel="stylesheet" type="text/css" href="style_principal.css"/>
    <script type="text/javascript" src="scripts.js"></script>
    <script src="chartjs/chart.umd.js"></script>
    <script src="chartjs/luxon.min.js"></script>
    <script src="chartjs/chartjs-adapter-luxon.min.js"></script>
    <script src="chartjs/chartjs-plugin-streaming.min.js"></script>
  </head>
  <body onload="index_onload();" onresize="index_resize()">
    <div id="lapage">
      <div class="graph_container">
        <div id="valeursV">
          <div class="fLeft valeur"><p id="valeurVent">~~~~m/s</p></div>
          <div class="fRight">
            <div><image id="boutonSettings" class="btn top10"  src="images/settings.svg" onclick="changeSettings();" /></div>
            <div><image id="boutonChrono"   class="btn"        src="images/chrono.svg"   onclick="toggleChrono();" /></div>
            <div><image id="boutonSon"      class="btn noshow" src="images/sound-on.svg" onclick="toggleSon();" /></div>
          </div>
        </div>
        <canvas id="graphVent" class="graphjs"></canvas>
      </div>
      <div class="graph_container">
        <div id="valeursP">
          <div class="fLeft valeur"><p id="valeurPress">~~~~hPa</p></div>
        </div>
        <canvas id="graphPres" class="graphjs"></canvas>
      </div>
      <div class="graph_container">
        <div id="valeursT">
          <div class="fLeft valeur"><p id="valeurTemp">~~~~°C</p></div>
        </div>
        <canvas id="graphTemp" class="graphjs"></canvas>
      </div>
      <div>
        <span id="fullScreenButton" onclick="toggleFullscreen()"><br />View in full screen<br />&nbsp;</span>
        <span id="refreshButton"    onclick="refreshPage()"><br />Refresh graphics<br />&nbsp;</span>
      </div>
      <hr />
      <p>
        <span id="bottomSSID"></span><br />
        WeThermic <span id="version">v0.0.00000000</span> - Copyright © Gauthier Brière (<a href="https://github.com/fra589">fra589</a>) - 2024-2024
      </p>
      <!--------------------------------------------------------------------------------------->
      <!-- Config dialog                                                                     -->
      <!--------------------------------------------------------------------------------------->
      <div id="settingsDialog" class="settingsDialog noshow">
        <span class="fLeft"><image id="boutonReboot" class="btn top10" src="images/reboot.svg" title="Reboot weather station" onclick="reboot();" /></span>
        <span class="fLeft"><image id="boutonReset" class="btn top10" src="images/factory.svg" title="Reset preferences to default" onclick="resetSettings();" /></span>
        <span class="fLeft"><image id="boutoWakeup" class="btn top10" src="images/wakeup.svg" title="Wake up station screen" onclick="wakeup();" /></span>
        <div class="fRight"><image id="boutonClose" class="btn top10" src="images/close.svg" title="Close settings" onclick="closeSettings();" /></div>
        <h1>Settings :</h1>
        <hr id="ligneHaut" />
        <p class="centerAlign">
          Color theme:
          <span>
            <input type="radio" name="theme" id="sombre" value="sombre" onchange="changeTheme('sombre');" checked />
            <label for="sombre">Dark</label>
            &nbsp;
            <input type="radio" name="theme" id="clair" value="clair" onchange="changeTheme('clair');" />
            <label for="clair">Clear</label>
          </span>
        </p>
        <p>
          <fieldset class="settingFieldset" id="dureeFieldset">
            <legend>Graph time length / refresh</legend>
            <span class="nowarp">
              <input type="radio" name="rDuree" id="d500" value="500" onchange="changeDuree(500);" checked />
              <label for="d500">5 mn / 0.5 s</label>
              &nbsp;
              <input type="radio" name="rDuree" id="d1000" value="1000" onchange="changeDuree(1000);" />
              <label for="d1000">10 mn / 1 s</label>
              &nbsp;
              <input type="radio" name="rDuree" id="d2000" value="2000" onchange="changeDuree(2000);" />
              <label for="d2000">20 mn / 2 s</label>
            </span>
          </fieldset>
        </p>
        <fieldset class="settingFieldset" id="graphFieldset">
          <legend>Average calculations</legend>
          <p class="leftAlign">
            <label class="nowarp">Average wind on&nbsp;<input type="range" class="fullWidth" id="lMoyVent" name="lMoyVent" min="1" max="10" value="2" step="1" onchange="changeLargeurVent()" oninput="inputLargeurVent()" />&nbsp;<span id="valMoyVent" >1:30</span></label>
          </p>
          <p class="leftAlign">
            <label class="nowarp">Average pres on&nbsp;<input type="range" class="fullWidth" id="lMoyPres" name="lMoyPres" min="1" max="10" value="2" step="1" onchange="changeLargeurPres()" oninput="inputLargeurPres()" />&nbsp;<span id="valMoyPres" >1:30</span></label>
          </p>
          <p class="leftAlign">
            <label class="nowarp">Average temp on&nbsp;<input type="range" class="fullWidth" id="lMoyTemp" name="lMoyTemp" min="1" max="10" value="2" step="1" onchange="changeLargeurTemp()" oninput="inputLargeurTemp()" />&nbsp;<span id="valMoyTemp" >1:30</span></label>
            
          </p>
        </fieldset>
        <hr />
        <!--------------------------------------------------------------------------------------->
        <!-- Config réseau                                                                     -->
        <!--------------------------------------------------------------------------------------->
        <h2>WiFi network configuration</h2>
        <div id="apConfig">
          <div class="tblPwd">
            <label for="apSSID">Access Point SSID</label>
            <input type="text" name="apSSID" id="apSSID" value="" maxlength="32" oninput="apConfigChange = true; inputConfigAP()" />
          </div>
          <div class="tblPwd">
            &nbsp;
          </div>
          <div class="tblPwd">
            <label for="apPwd1">Access Point password</label>
            <input type="password" name="apPwd1" id="apPwd1" value="" maxlength="63" title="Enter AP password:&#010;min len=8, max len=63&#010;or leave it empty for no password." oninput="apConfigChange = true; inputConfigAP()" />
            <br />
            <label for="apPwd2">Repeat AP password</label>
            <input type="password" name="apPwd2" id="apPwd2" value="" maxlength="63" oninput="apConfigChange = true; inputConfigAP()" />
          </div>
          <div class="tblPwdCenter">
            <span><image id="btnShowPasswd" src="images/oeuil.svg" title="Show password" onclick="toogleShowPasswd('ap');" /></span>
            <span><image id="btnValideAP" src="images/valid-disable.svg" title="Update APconfig" onclick="updateAPconfig();" /></span>
          </div>
        </div>
        <hr />
        <!--------------------------------------------------------------------------------------->
        <div id="activeNetwork">
          <label for="ssidActuel">Actual network, SSID = </label>
          <input type="text" name="ssidActuel" id="ssidActuel" value="" readonly />
          <br />
          <label for="ipActuel">Actual network, IP = </label>
          <input type="text" name="ipActuel" id="ipActuel" value="" readonly />
          <div id="btnDeconnect" title="Disconnect from current network..." onclick="deconnect_clique()">
            Disconnect...
          </div>
        </div>
        <hr class="lignePartielle" />
        <div id="networkTable">
          <!-- Rempli par script.js: setNetworkList() -->
        </div>
        <span class="fRight" onclick="get_networks();"><image id="boutonRefresh" class="btn" src="images/refresh.svg"/></span>

        <!-- Dialogue connection WiFi -->
        <div id="dlgMask0" class="dlgMask noshow">
          <div id="dlgConnect" class="dialog masquer">
            <div id="dlgContenu0" class="dlgPwdContenu">
              <h2>Connect to a new WiFi</h2>
              <p>
                <label for="ssid_input">Connecting to network: SSID = </label>
                <input type="text" name="ssid_input" id="ssid_input" value="" readonly />
                <br />
                <label for="pwd_input">Enter network password: </label>
                <input type="password" name="pwd_input" id="pwd_input" value="" onkeyup="connect_keyup(event)" /><br />
                <span><image id="btnShowCliPasswd" src="images/oeuil.svg" title="Show password" onclick="toogleShowPasswd('cli');" /></span>
              </p>
            </div>
            <p class="alignement-droit" id="dlgConnectButtons">
              <button id="btnConnect" title="Se connecter au réseau" onclick="connect_clique()">
                Connect
              </button>
              &nbsp;
              <button id="btnAnnuler" title="Fermer cette boite de dialogue" onclick="connect_cancel()">
                Cancel
              </button>
            </p>
          </div> <!-- dlgConnect -->
        </div> <!-- dlgMask0 -->
      </div> <!-- settingsDialog -->
      <!--------------------------------------------------------------------------------------->
      <!-- "Sablier"                                                                     -->
      <!--------------------------------------------------------------------------------------->
      <div id="cadre_attente">
        <div id="attente0" class="attente"></div>
      </div>      
      <!--------------------------------------------------------------------------------------->
      <!-- "Chrono"                                                                     -->
      <!--------------------------------------------------------------------------------------->
      <div id="cadre_chrono" class="noshow">
        <span id="chrono0">07:00</span>&nbsp;<span><image id="btnChrono" src="images/start-chrono.svg" title="Reset chrono" onclick="startStopChrono();" /></span>
      </div>      
    </div> <!-- lapage -->
  </body>
</html>
